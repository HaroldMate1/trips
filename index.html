<!DOCTYPE html>
 <html lang="es">
 <head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Itinerario Modificado: Aventura Europea 2025</title>
 <script src="https://cdn.tailwindcss.com"></script>
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 <script src="https://cdn.plot.ly/plotly-2.27.0.min.js" charset="utf-8"></script>
 <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 <style>
 html {
 scroll-behavior: smooth;
 }
 body {
 font-family: 'Inter', sans-serif;
 background-color: #F8F9FA;
 color: #212529;
 }
 .bg-soft-slate {
 background-color: #4A5568;
 }
 .nav-link {
 padding: 8px 16px;
 border-radius: 9999px;
 transition: all 0.3s ease;
 font-weight: 600;
 }
 .nav-link.active {
 background-color: #4A5568;
 color: #FFFFFF;
 }
 .nav-link:not(.active):hover {
 background-color: #E9ECEF;
 }
 .link {
 color: #007BFF;
 font-weight: 600;
 text-decoration: none;
 }
 .link:hover {
 text-decoration: underline;
 }
 .chart-container, .map-container {
 width: 100%;
 }
 .map-container {
 height: 450px;
 }
 .chart-container {
 max-width: 400px;
 height: 350px;
 margin: auto;
 }
 @media (min-width: 768px) {
 .map-container {
 height: 500px;
 }
 .chart-container {
 height: 400px;
 }
 }
 /* Professional Itinerary Timeline */
 .timeline {
 position: relative;
 max-width: 1000px;
 margin: 0 auto;
 }
 .timeline::after {
 content: '';
 position: absolute;
 width: 3px;
 background-color: #DEE2E6;
 top: 0;
 bottom: 0;
 left: 50%;
 margin-left: -1.5px;
 }
 .timeline-container {
 padding: 10px 40px;
 position: relative;
 background-color: inherit;
 width: 50%;
 }
 .timeline-container.left {
 left: 0;
 }
 .timeline-container.right {
 left: 50%;
 }
 .timeline-container::after {
 content: '';
 position: absolute;
 width: 20px;
 height: 20px;
 right: -10px;
 background-color: white;
 border: 4px solid #007BFF;
 top: 25px;
 border-radius: 50%;
 z-index: 1;
 }
 .right::after {
 left: -10px;
 }
 .timeline-content {
 padding: 20px;
 background-color: white;
 position: relative;
 border-radius: 8px;
 box-shadow: 0 4px 12px rgba(0,0,0,0.08);
 border: 1px solid #E9ECEF;
 }
 /* Responsive timeline */
 @media screen and (max-width: 768px) {
 .timeline::after {
 left: 31px;
 }
 .timeline-container {
 width: 100%;
 padding-left: 70px;
 padding-right: 25px;
 }
 .timeline-container.left, .timeline-container.right {
 left: 0%;
 }
 .timeline-container::after {
 left: 21px;
 }
 .right::after {
 left: 21px;
 }
 }
 </style>
 </head>
 <body class="bg-gray-50">
 <div class="text-center py-2 bg-gray-100 text-sm text-gray-600 font-semibold">Made with ‚ô•Ô∏è by Mateo Mojica Urrego</div>
 <header class="bg-white/90 backdrop-blur-md sticky top-0 z-50 shadow-sm">
 <div class="container mx-auto px-4 py-3 flex justify-between items-center">
 <h1 class="text-xl md:text-2xl font-bold text-soft-slate">Euroviaje Familiar 2025</h1>
 <nav id="nav-menu" class="bg-gray-200/50 rounded-full p-1 flex items-center space-x-1">
 <a href="#resumen" class="nav-link text-sm md:text-base active">Resumen</a>
 <a href="#itinerario" class="nav-link text-sm md:text-base">Itinerario</a>
 <a href="#presupuesto" class="nav-link text-sm md:text-base">Presupuesto</a>
 </nav>
 </div>
 </header>
 <main class="container mx-auto p-4 md:p-8">
 <section id="resumen" class="scroll-mt-20">
 <div class="text-center mb-12">
 <h2 class="text-3xl md:text-4xl font-bold mb-2">Tu Aventura Europea a Medida</h2>
 <p class="text-lg text-gray-600">Un vistazo general a tu viaje optimizado del 27 de Sep al 13 de Oct de 2025.</p>
 </div>
 <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
 <div class="bg-white p-6 rounded-xl shadow-md text-center border-t-4 border-blue-500">
 <h3 class="text-4xl font-bold text-blue-600">17</h3>
 <p class="text-gray-600 font-semibold">D√≠as de Aventura</p>
 </div>
 <div class="bg-white p-6 rounded-xl shadow-md text-center border-t-4 border-teal-500">
 <h3 class="text-4xl font-bold text-teal-600">5</h3>
 <p class="text-gray-600 font-semibold">Pa√≠ses por Descubrir</p>
 </div>
 <div class="bg-white p-6 rounded-xl shadow-md text-center border-t-4 border-amber-500">
 <h3 class="text-4xl font-bold text-amber-600">7</h3>
 <p class="text-gray-600 font-semibold">Ciudades Principales</p>
 </div>
 </div>
 <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 mb-12">
 <div class="bg-white p-6 rounded-xl shadow-lg border lg:col-span-3">
 <h3 class="text-2xl font-bold mb-4 text-center">Nueva Ruta del Viaje</h3>
 <p class="text-center text-gray-600 mb-4">Un recorrido visual de tu aventura. Pasa el cursor para ver detalles.</p>
 <div class="map-container" id="route-map"></div>
 </div>
 <div class="bg-white p-6 rounded-xl shadow-lg border lg:col-span-2">
 <h3 class="text-2xl font-bold mb-4 text-center">Desglose del Presupuesto (COP)</h3>
 <p class="text-center text-gray-600 mb-4">Costos totales para el grupo (3 adultos, 1 ni√±o de 11).</p>
 <div class="chart-container">
 <canvas id="budget-chart"></canvas>
 </div>
 </div>
 </div>
 <div class="bg-amber-50 p-6 rounded-xl shadow-lg border border-amber-200">
 <h3 class="text-2xl font-bold mb-4 flex items-center justify-center text-amber-800">
 <i class="fas fa-plane-departure text-amber-600 mr-3"></i> Acci√≥n Requerida: ¬°Reservas Prioritarias!
 </h3>
 <ul class="space-y-4">
 <li class="flex items-start"><span class="text-xl mr-3">‚úàÔ∏è</span><div><strong class="font-semibold">Vuelos Internacionales (BOG ‚Üî AMS):</strong> Reserva tu ida y vuelta con KLM.<br><a href="https://www.klm.com.co/es/search/flight-selection?application=booking_flow&search_id=457588725&number_of_passengers=3_1_0&source=Search_results" target="_blank" class="link">Reservar Vuelos (KLM)</a>. <span class="text-sm text-gray-500">(Presupuesto Aprox: COP 15,000,000 para el grupo)</span></div></li>
 <li class="flex items-start"><span class="text-xl mr-3">‚úàÔ∏è</span><div><strong class="font-semibold">Vuelo √Åmsterdam ‚Üí Niza (Sep 30):</strong> Conexi√≥n a la Costa Azul.<br><a href="https://www.google.com/flights#flt=AMS.NCE.2025-09-30;c:EUR;e:1;a:KL;s:0;sd:1;t:f;tt:o;p:190.2.EUR.190.2.EUR" target="_blank" class="link">Buscar Vuelo (KLM/EasyJet)</a>.</div></li>
 <li class="flex items-start"><span class="text-xl mr-3">‚úàÔ∏è</span><div><strong class="font-semibold">Vuelo Roma ‚Üí √Åmsterdam (Oct 11):</strong> Vuelo de regreso al punto de partida.<br><a href="https://www.google.com/flights#flt=FCO.AMS.2025-10-11;c:EUR;e:1;s:0;a:KL;sd:1;t:f;tt:o" target="_blank" class="link">Buscar Vuelo (KLM/EasyJet)</a>.</div></li>
 <li class="flex items-start"><span class="text-xl mr-3">üöÑ</span><div><strong class="font-semibold">Tren Panor√°mico Bernina Express:</strong> Reserva los asientos para el tramo Tirano - St. Moritz.<br><a href="https://tickets.rhb.ch/en/pages/bernina-express" target="_blank" class="link">Reservar Bernina Express</a>.</div></li>
 </ul>
 </div>
 </section>
 <section id="itinerario" class="scroll-mt-20 mt-16">
 <div class="text-center mb-12">
 <h2 class="text-3xl md:text-4xl font-bold mb-2">Itinerario Detallado</h2>
 <p class="text-lg text-gray-600">Un plan profesional para tu aventura d√≠a por d√≠a.</p>
 </div>
 <div class="timeline" id="timeline-container">
 </div>
 </section>
 <section id="presupuesto" class="scroll-mt-20 mt-16">
 <div class="text-center mb-12">
 <h2 class="text-3xl md:text-4xl font-bold mb-2">Presupuesto Estimado para el Grupo</h2>
 <p class="text-lg text-gray-600">Tabla detallada de costos para 3 adultos y 1 ni√±o. Usa los botones para convertir las divisas.</p>
 </div>
 <div class="bg-white p-6 rounded-xl shadow-lg overflow-x-auto border">
 <div class="mb-4 text-center">
 <label class="font-semibold mr-2">Moneda:</label>
 <button class="currency-btn bg-gray-300 text-gray-700 py-1 px-3 rounded-full" data-currency="EUR">EUR</button>
 <button class="currency-btn bg-soft-slate text-white py-1 px-3 rounded-full" data-currency="COP">COP</button>
 </div>
 <table id="budget-table" class="w-full text-left">
 <thead>
 <tr class="border-b-2 border-gray-200">
 <th class="py-2 px-4 font-semibold">Categor√≠a</th>
 <th class="py-2 px-4 font-semibold text-right">Costo</th>
 </tr>
 </thead>
 <tbody>
 </tbody>
 </table>
 <p class="text-sm text-gray-500 mt-4 text-center">*Nota: El presupuesto es un total estimado para el grupo. Los precios de los hoteles var√≠an seg√∫n la demanda.</p>
 </div>
 </section>
 </main>
 <footer class="text-center py-8 mt-12 border-t">
 <p class="text-gray-500">&copy; 2025 | Tu Aventura Europea te Espera. ¬°Buen Viaje!</p>
 </footer>
 <script>
 const tripData = {
 itinerary: [
 { day: 1, date: "Vie, 27 Sep", title: "‚úàÔ∏è Salida de Bogot√°", icon: "fa-plane-departure", details: "Vuelo nocturno desde Bogot√° (BOG) a √Åmsterdam (AMS).<br><strong>Vuelo Sugerido:</strong> KLM." },
 { day: 2, date: "S√°b, 28 Sep", title: "üöÜ Llegada y Traslado a Utrecht", icon: "fa-train", details: "Llegada al Aeropuerto Schiphol (AMS). Tomar tren directo a Utrecht (30 min).<br><strong>Plan de equipaje:</strong> Considerar dejar la maleta grande en un hotel del aeropuerto donde se hospedar√°n al final del viaje (ej. Sheraton Schiphol) para viajar m√°s ligeros.<br><strong>Hotel:</strong> <a href='https://www.marriott.com/en-us/hotels/amsox-moxy-utrecht/overview/' class='link' target='_blank'>Moxy Utrecht</a>. Check-in y paseo por el centro hist√≥rico y canales de Utrecht." },
 { day: 3, date: "Dom, 29 Sep", title: "üå¨Ô∏è Molinos y Canales", icon: "fa-wind-turbine", details: "Excursi√≥n de d√≠a completo desde Utrecht.<br><strong>Transporte:</strong> Usar el <a href='https://www.ns.nl/producten/en/meest-gekocht/p/groepsticket-daluren' class='link' target='_blank'>NS Group Ticket</a> (para los 3 adultos) y un <a href='https://www.ns.nl/producten/en/losse-kaartjes/p/railrunner' class='link' target='_blank'>Railrunner ticket</a> (‚Ç¨2.50 para el ni√±o).<br><strong>Ma√±ana:</strong> Visitar <strong>Zaanse Schans</strong> (molinos de viento).<br><strong>Tarde:</strong> Explorar <strong>√Åmsterdam</strong> (Plaza Dam, Mercado de las Flores)." },
 { day: 4, date: "Lun, 30 Sep", title: "‚úàÔ∏è Vuelo a la Costa Azul", icon: "fa-plane", details: "Ma√±ana libre en Utrecht. Regreso al aeropuerto de Schiphol (AMS).<br><strong>Tarde:</strong> Vuelo a <strong>Niza (NCE)</strong>.<br>Traslado al hotel y check-in.<br><strong>Hotel:</strong> <a href='https://www.marriott.com/en-us/hotels/nceac-ac-hotel-nice/overview/' class='link' target='_blank'>AC Hotel by Marriott Nice</a>. Caminata nocturna por el <strong>Paseo de los Ingleses</strong>." },
 { day: 5, date: "Mar, 1 Oct", title: "üíé Glamour en M√≥naco", icon: "fa-gem", details: "Excursi√≥n de un d√≠a a M√≥naco.<br><strong>Transporte:</strong> Tren regional desde Nice-Ville (aprox. 25 min).<br><strong>Actividades:</strong> Ver el cambio de guardia en el <strong>Palacio del Pr√≠ncipe</strong>, visitar el <strong>Casino de Montecarlo</strong> y el Jard√≠n Ex√≥tico." },
 { day: 6, date: "Mi√©, 2 Oct", title: "üöÜ Niza ‚Üí Mil√°n", icon: "fa-train-subway", details: "Ma√±ana para disfrutar de Niza. Subir a la <strong>Colina del Castillo</strong> para vistas panor√°micas.<br><strong>Mediod√≠a:</strong> Tren desde Niza a Mil√°n (aprox. 5 horas).<br><strong>Hotel:</strong> <a href='https://www.marriott.com/en-us/hotels/millc-sheraton-diana-majestic-milan/overview/' class='link' target='_blank'>Sheraton Diana Majestic, Milan</a>. Noche de aperitivo milan√©s." },
 { day: 7, date: "Jue, 3 Oct", title: "üèîÔ∏è Alpes Suizos: Bernina Express", icon: "fa-mountain-sun", details: "<strong class='text-blue-600'>¬°Excursi√≥n √©pica de un d√≠a!</strong><br><strong>06:20:</strong> Tren de Mil√°n a <strong>Tirano</strong>.<br><strong>10:00:</strong> Abordar el <strong>Tren Panor√°mico Bernina Express</strong> de Tirano a St. Moritz, un sitio del Patrimonio Mundial de la UNESCO. Vistas espectaculares de glaciares y lagos.<br><strong>Tarde:</strong> Explorar St. Moritz y tomar el tren de regreso a Mil√°n." },
 { day: 8, date: "Vie, 4 Oct", title: "üöÜ Mil√°n ‚Üí Venecia", icon: "fa-water", details: "<strong>Ma√±ana:</strong> Visitar el imponente <strong>Duomo de Mil√°n</strong> y la Galer√≠a Vittorio Emanuele II.<br><strong>Tarde:</strong> Tren de alta velocidad (Frecciarossa) a Venecia (aprox. 2.5 horas).<br><strong>Hotel:</strong> <a href='https://www.marriott.com/en-us/hotels/vceac-ac-hotel-venezia/overview/' class='link' target='_blank'>AC Hotel Venezia</a>. Noche explorando las calles y canales." },
 { day: 9, date: "S√°b, 5 Oct", title: "üé≠ La Magia de Venecia", icon: "fa-gondola", details: "D√≠a completo para explorar Venecia.<br><strong>Actividades:</strong> Visitar la <strong>Plaza de San Marcos</strong>, el <strong>Palacio Ducal</strong> y el <strong>Puente de Rialto</strong>. No se pierdan un paseo en g√≥ndola." },
 { day: 10, date: "Dom, 6 Oct", title: "üöÜ Venecia ‚Üí Roma", icon: "fa-landmark-dome", details: "Ma√±ana libre en Venecia para visitar las islas de Murano y Burano.<br><strong>Tarde:</strong> Tren de alta velocidad a Roma (aprox. 4 horas).<br><strong>Hotel:</strong> <a href='https://www.marriott.com/en-us/hotels/romfl-rome-marriott-grand-hotel-flora/overview/' class='link' target='_blank'>Rome Marriott Grand Hotel Flora</a>. Paseo nocturno a la <strong>Fontana di Trevi</strong>." },
 { day: 11, date: "Lun, 7 Oct", title: "üèõÔ∏è La Roma Imperial", icon: "fa-building-columns", details: "D√≠a dedicado a la Antigua Roma.<br><strong>Actividades:</strong> Explorar el <strong>Coliseo</strong>, el <strong>Foro Romano</strong> y el Monte Palatino. Es crucial reservar las entradas con mucha antelaci√≥n." },
 { day: 12, date: "Mar, 8 Oct", title: "üáªüá¶ El Vaticano", icon: "fa-church", details: "Visita a la Ciudad del Vaticano.<br><strong>Actividades:</strong> Explorar la <strong>Plaza y Bas√≠lica de San Pedro</strong>. Visitar los <strong>Museos Vaticanos</strong> y la <strong>Capilla Sixtina</strong>. Tambi√©n se requiere reserva anticipada." },
 { day: 13, date: "Mi√©, 9 Oct", title: "üé® Coraz√≥n de Roma", icon: "fa-paint-brush", details: "Explorar los tesoros del centro de Roma.<br><strong>Actividades:</strong> Visitar el <strong>Pante√≥n</strong>, pasear por <strong>Piazza Navona</strong>, y subir los <strong>Escalones Espa√±oles</strong>. Tarde libre para compras o disfrutar de un gelato." },
 { day: 14, date: "Jue, 10 Oct", title: "üçù D√≠a Libre en Roma", icon: "fa-utensils", details: "√öltimo d√≠a completo en Roma. Pueden visitar el barrio de Trastevere para un almuerzo aut√©ntico, explorar los jardines de Villa Borghese o visitar alguna otra atracci√≥n de inter√©s." },
 { day: 15, date: "Vie, 11 Oct", title: "‚úàÔ∏è Regreso a √Åmsterdam", icon: "fa-plane-arrival", details: "<strong>Ma√±ana:</strong> Vuelo desde Roma (FCO) a √Åmsterdam (AMS).<br>Traslado al hotel del aeropuerto, recuperar el equipaje guardado.<br><strong>Hotel:</strong> <a href='https://www.marriott.com/en-us/hotels/amsas-sheraton-amsterdam-airport-hotel-and-conference-center/overview/' class='link' target='_blank'>Sheraton Amsterdam Airport Hotel</a>. Tarde de descanso." },
 { day: 16, date: "S√°b, 12 Oct", title: "üßÄ √öltimo D√≠a en Holanda", icon: "fa-cheese", details: "D√≠a libre para √∫ltimas compras o una visita tranquila. Pueden tomar un tren corto al centro de √Åmsterdam para visitar el Mercado de las Flores o dar un paseo final por los canales." },
 { day: 17, date: "Dom, 13 Oct", title: "üè† Vuelo de Vuelta a Casa", icon: "fa-house-user", details: "Disfrutar del desayuno en el hotel.<br>Dirigirse al terminal de salidas del Aeropuerto Schiphol para el vuelo de regreso a Bogot√° con KLM." }
 ],
 budget: [
 { category: "Vuelos Internacionales (BOG-AMS)", costEUR: 3335 },
 { category: "Vuelos Intra-Europeos (2)", costEUR: 1000 },
 { category: "Alojamiento (15 noches)", costEUR: 6000 },
 { category: "Trenes y Pases (Incl. Bernina)", costEUR: 1800 },
 { category: "Comida y Bebida", costEUR: 3825 },
 { category: "Atracciones y Tours", costEUR: 800 },
 { category: "Transporte Local y Varios", costEUR: 500 },
 ],
 locations: {
 cities: [
 { name: 'Utrecht', lat: 52.0907, lon: 5.1214 },
 { name: '√Åmsterdam', lat: 52.3676, lon: 4.9041 },
 { name: 'Niza', lat: 43.7102, lon: 7.2620 },
 { name: 'M√≥naco', lat: 43.7384, lon: 7.4246 },
 { name: 'Mil√°n', lat: 45.4642, lon: 9.1900 },
 { name: 'St. Moritz (Bernina)', lat: 46.4908, lon: 9.8351},
 { name: 'Venecia', lat: 45.4408, lon: 12.3155 },
 { name: 'Roma', lat: 41.9028, lon: 12.4964 },
 { name: '√Åmsterdam', lat: 52.3676, lon: 4.9041 }
 ],
 countries: [
 { name: 'PA√çSES BAJOS', lat: 52.2, lon: 5.4 },
 { name: 'FRANCIA', lat: 46.2, lon: 2.2 },
 { name: 'M√ìNACO', lat: 43.7, lon: 7.5 },
 { name: 'SUIZA', lat: 46.8, lon: 8.2 },
 { name: 'ITALIA', lat: 42.8, lon: 12.8 }
 ]
 }
 };
 
 const exchangeRates = {
 EUR: 1,
 COP: 4500
 };
 
 document.addEventListener('DOMContentLoaded', () => {
 const copFormatter = new Intl.NumberFormat('es-CO', {
 style: 'currency',
 currency: 'COP',
 minimumFractionDigits: 0
 });
 
 // Itinerary Timeline Generation
 const timelineContainer = document.getElementById('timeline-container');
 tripData.itinerary.forEach((item, index) => {
 const side = index % 2 === 0 ? 'left' : 'right';
 const timelineItem = `
 <div class="timeline-container ${side}">
 <div class="timeline-content">
 <h3 class="font-bold text-xl mb-2 flex items-center"><i class="fas ${item.icon} text-blue-500 w-6 mr-2"></i>D√≠a ${item.day}: ${item.title}</h3>
 <p class="text-sm text-gray-500 mb-3 font-semibold">${item.date}</p>
 <p class="text-gray-700 leading-relaxed">${item.details}</p>
 </div>
 </div>
 `;
 timelineContainer.innerHTML += timelineItem;
 });
 
 // Budget Chart
 const budgetCtx = document.getElementById('budget-chart').getContext('2d');
 new Chart(budgetCtx, {
 type: 'doughnut',
 data: {
 labels: tripData.budget.map(item => item.category.replace(/ y /g, ' & ')),
 datasets: [{
 data: tripData.budget.map(item => item.costEUR * exchangeRates.COP),
 backgroundColor: ['#007BFF', '#FFC107', '#28A745', '#DC3545', '#6F42C1', '#FD7E14', '#E83E8C'],
 borderColor: '#FFFFFF',
 borderWidth: 4,
 }]
 },
 options: {
 responsive: true,
 maintainAspectRatio: false,
 plugins: {
 legend: {
 position: 'bottom',
 labels: {
 padding: 15,
 font: {
 size: 12
 },
 boxWidth: 20
 }
 },
 tooltip: {
 callbacks: {
 label: (context) => ` ${context.label}: ${copFormatter.format(context.parsed)}`
 }
 }
 },
 cutout: '60%'
 }
 });
 
 // Budget Table
 const budgetTableBody = document.querySelector('#budget-table tbody');
 const currencyButtons = document.querySelectorAll('.currency-btn');
 const subtotal = tripData.budget.reduce((sum, item) => sum + item.costEUR, 0);
 const contingency = subtotal * 0.1;
 const total = subtotal + contingency;
 
 function renderBudgetTable(currency) {
 budgetTableBody.innerHTML = '';
 const rate = exchangeRates[currency];
 const formatter = new Intl.NumberFormat(currency === 'COP' ? 'es-CO' : 'de-DE', {
 style: 'currency',
 currency: currency,
 minimumFractionDigits: 0
 });
 
 tripData.budget.forEach(item => {
 budgetTableBody.innerHTML += `<tr><td class="py-2 px-4">${item.category}</td><td class="py-2 px-4 text-right">${formatter.format(item.costEUR * rate)}</td></tr>`;
 });
 
 budgetTableBody.innerHTML += `
 <tr class="border-t-2 font-semibold"><td class="py-2 px-4">Sub-Total</td><td class="py-2 px-4 text-right">${formatter.format(subtotal * rate)}</td></tr>
 <tr><td class="py-2 px-4">Contingencia (10%)</td><td class="py-2 px-4 text-right">${formatter.format(contingency * rate)}</td></tr>
 <tr class="bg-gray-100 font-bold text-lg"><td class="py-3 px-4">GRAN TOTAL</td><td class="py-3 px-4 text-right">${formatter.format(total * rate)}</td></tr>
 `;
 }
 
 currencyButtons.forEach(button => {
 button.addEventListener('click', () => {
 document.querySelector('.currency-btn.bg-soft-slate').classList.replace('bg-soft-slate', 'bg-gray-300');
 document.querySelector('.currency-btn.text-white').classList.replace('text-white', 'text-gray-700');
 button.classList.replace('bg-gray-300', 'bg-soft-slate');
 button.classList.replace('text-gray-700', 'text-white');
 renderBudgetTable(button.dataset.currency);
 });
 });
 
 renderBudgetTable('COP');
 
 // Interactive Map
 const mapData = [
 { // Route line and city markers
 type: 'scattergeo',
 mode: 'lines+markers',
 lon: tripData.locations.cities.map(c => c.lon),
 lat: tripData.locations.cities.map(c => c.lat),
 text: tripData.locations.cities.map(c => c.name),
 hoverinfo: 'text',
 marker: {
 size: 8,
 color: '#C05621'
 },
 line: {
 width: 2,
 color: '#4A5568'
 }
 },
 { // Country names
 type: 'scattergeo',
 mode: 'text',
 lon: tripData.locations.countries.map(c => c.lon),
 lat: tripData.locations.countries.map(c => c.lat),
 text: tripData.locations.countries.map(c => c.name),
 hoverinfo: 'none',
 textfont: {
 family: 'Inter, sans-serif',
 size: 11,
 color: '#212529',
 weight: 600
 }
 }
 ];
 
 const mapLayout = {
 geo: {
 projection: {
 type: 'mercator'
 },
 scope: 'europe',
 center: { lon: 8, lat: 48 },
 lataxis: { range: [40, 54] },
 lonaxis: { range: [2, 16] },
 showland: true,
 landcolor: '#E9ECEF',
 bgcolor: 'rgba(255,255,255,0)',
 },
 margin: { l: 0, r: 0, t: 0, b: 0 },
 paper_bgcolor: 'rgba(255,255,255,0)',
 plot_bgcolor: 'rgba(255,255,255,0)',
 showlegend: false
 };
 
 Plotly.newPlot('route-map', mapData, mapLayout, {responsive: true, displayModeBar: false});
 
 // Active Nav Link on Scroll
 const navMenu = document.getElementById('nav-menu');
 const sections = document.querySelectorAll('main section');
 
 const observer = new IntersectionObserver((entries) => {
 entries.forEach(entry => {
 if (entry.isIntersecting) {
 const id = entry.target.getAttribute('id');
 navMenu.querySelector('a.active').classList.remove('active');
 navMenu.querySelector(`a[href="#${id}"]`).classList.add('active');
 }
 });
 }, { rootMargin: '-40% 0px -60% 0px' });
 
 sections.forEach(section => observer.observe(section));
 });
 </script>
 </body>
 </html>